version: '3'

tasks:
  build:
    desc: Build the Python package
    preconditions:
      - sh: command -v uv
        msg: "uv is required but not installed"
    cmds:
      - uv build

  install:
    desc: Install the package via uv
    preconditions:
      - sh: command -v uv
        msg: "uv is required but not installed"
    cmds:
      - uv pip install --system .

  install-dev:
    desc: Install the package in development mode
    preconditions:
      - sh: command -v uv
        msg: "uv is required but not installed"
    cmds:
      - uv pip install --system -e .

  deps:
    desc: Install Python dependencies from pyproject.toml
    preconditions:
      - sh: command -v uv
        msg: "uv is required but not installed"
    cmds:
      - uv sync

  clean:
    desc: Remove Python build artifacts
    cmds:
      - rm -rf build/ dist/ *.egg-info
      - find . -type d -name __pycache__ -exec rm -rf {} + 2>/dev/null || true
